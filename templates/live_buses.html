<!doctype html>
<html lang="en">
    <head>
	<meta charset="utf-8">
	<title>Hello, World!</title>
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
	     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> -->

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">

    </head>
    <body>
	<div>
  	    <h1>Hello, World!</h1>
	    <p>start here</p>
	    <div id="mapid"></div>


    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script src="{{ url_for('static', filename='js/leaflet-heat.js') }}"></script>
    <script>
     var map = L.map('mapid').setView([40.805, -74], 9);
     
     L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
	 attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	 maxZoom: 18,
	 id: 'pavopax.01omlmkc',
	 accessToken: 'pk.eyJ1IjoicGF2b3BheCIsImEiOiJjaW50Ym95YmExMTBvdTZseXpvcWJhbGRmIn0.TB33sIW0AjuQ7ywHQU_27A'
     }).addTo(map);

     // data passed from app.py
     data = {{data}}

     addressPoints = data.map(function (p) { return [p[0], p[1]]; });

     var heat = L.heatLayer(addressPoints).addTo(map);

     var popup = L.popup();

     function onMapClick(e) {
	 popup
             .setLatLng(e.latlng)
             .setContent("ITS A WIN! You clicked the map at " + e.latlng.toString())
             .openOn(map);
     }

     map.on('click', onMapClick);
    </script>
    </body>
</html>
